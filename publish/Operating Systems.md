Offer suggestions by opening a [PR](https://github.com/supplefrog/linked-blog-md/pulls)

# Table of Contents
- [Components](#components)
  - [Process Scheduling](#process-scheduling)
  - [Memory Management](#memory-management)
  - [File System Management](#file-system-management)
  - [Security](#security)
  - [Device Management](#device-management)
- [Boot Process](#boot-process)
- [Windows](#windows)
- [Linux](#linux)
  - [Directory Structure](#directory-structure)
  - [CLI (Terminal Emulators)](#cli-terminal-emulators)
  - [Shell](#shell)
  - [GNU Utils](#gnu-utils)
  - [Commands](#commands)

---

# Components

## Process Scheduling
### Non-preemptive
- Resources allocated until process completes execution.

### Preemptive
- Resources allocated for fixed time.

### Process Control Blocks (PCB)
#### Data Structure
- Process State
- PID
- Registers
- Memory Limits
- Open Files

- PCBs of particular process states placed in their respective queues:
  - **Job Queue**: All processes.
  - **Ready Queue**: In memory, waiting to execute.
  - **Device Queue**: Blocked due to unavailability of an I/O device.

### Scheduler
#### Job
- Loads from queue into memory.

#### CPU
- Change Process state (ready → running).

#### Swapping
- Suspended Process (e.g., waiting for I/O) swapped out of memory.
- Can reintroduce into memory.

### Context Switching
- Restore register, memory state of CPU in PCB to resume process from the same point.

### Algorithms
- FCFS, SJN, Priority Scheduling, SRT, Round Robin, Multiple-level Queue, etc.

---

## Memory Management
### Memory Division
#### Pages
- Fixed-size blocks.

#### Segments
- Variable-size logical units.

### Virtual Memory
- Use SD as memory.
  - **Swap Space**: Area reserved.

---

## File System Management
- Organize files, metadata hierarchically in directories for easy access.
- File data storage allocation.

### Encryption
- During storage and transit.

### Authorization
#### Discretionary Access Control (DAC)
- Manages user permissions (rwx).
- Defined in Access Control Lists.

---

## Security
### Authentication
- Verifies identity.
- Username-password login, biometrics, SSH keys.

### Authorization
#### SELinux
- Implements Mandatory Access Control (MAC) at kernel level.
- Establish roles and permissions for users and processes, overriding DAC based on resource ownership.
- Enforces security policies that restrict access to system resources (e.g., Port access for applications).

#### Firewall
- Block incoming traffic based on rich rules.
  - Example: block traffic on specific port from certain services/IPs.

---

## Device Management
### Kernel Modules
#### Drivers
- Hardware devices → Interrupt Request (IRQ).
- Register Interrupt Service Routine (ISR):
  - Handle interrupts generated by respective devices.
  - Perform minimal processing and defer extensive processing to quickly return control to the interrupted process.
  - Use Interrupt Controller:
    - ICs prioritize IRQs for CPU.
    - APIC, MSI Controller.

- Device Drivers:
  - CPU, Network Drivers.

- File System Drivers:
  - Manage I/O and buffering.
  - Example: NTFS.

#### Pluggable Authentication Modules (PAM)
- Provide framework for integrating authentication methods into applications.

#### Network Protocol Modules
- TCP/IP, UDP.

#### Security Modules - Linux Security Modules (LSM)
- Provide hooks for security decisions (file/network operations, process executions).
- Example: SELinux.

### Kernel Services
- Manage software interrupts:
  - Exception Handling.
  - System calls:
    - Examples: `read()`, `write()`, `getpid()`, `time()`, `pipe()`, `socket()`, `exec()`.
    - Processor Mode switch: user to kernel mode (OS core functions).
    - Execute privileged operation.
    - Return to user mode.

---

# Boot Process
## Power ON
- CPU fetches reset vector from Firmware ROM.
  - Reset vector: Points CPU to the start of firmware execution.

## Firmware
#### BIOS
- POST (Power On Self-Test):
  - Checks CPU, RAM, MoBo, I/O devices.
  - If successful:
    - Locates bootable media.
  - Else:
    - Stops and shows error (Beeps/LED codes).

- Load boot sector from SD.
- **MBR** (Master Boot Record) - 512 bytes data structure stored in LBA 0:
  - Contains:
    - Bootstrap loader: scans partition table for a primary partition marked bootable mounted on `/boot`.
    - Partition table.
    - Disk signature.
  - Loads bootloader.

#### UEFI
- SEC (Security Initialization).
- PEI (Pre-EFI Initialization).
- DXE (Driver Execution Environment).
- BDS (Boot Device Selection).
- Reads GPT header & partition table:
  - LBA 0: Protective MBR.
  - LBA 1: Primary GPT Header (partitioning scheme).
  - LBA 2: Primary partition table.
  - Backup header and PT at the end of the disk.

- **ESP (EFI System Partition - FAT32)** mounted on `/boot/efi`:
  - Contains `.efi` executable files:
    - Bootloader (systemd-boot, GRUB2).
    - Secure boot ensures only signed `.efi` are executed.
  - Loads bootloader.

## Bootloader
#### GRUB
- Reads `/boot`.
- `/efi/EFI/redhat/grub.cfg`:
  - Boot menu.
  - Command line parameters (can customize kernel behavior).
- Loads into RAM:
  - **vmlinuz** (supports virtual memory).
  - **initramfs img**.

#### systemd-boot
- `/boot/efi/EFI/systemd/systemd-bootx64.efi`.
- Boot menu.
- Loads `vmlinuz` and `initramfs` into RAM and hands over execution.

## Kernel
- `vmlinuz` contains a small stub (decompression code) that extracts itself.
- Initializes:
  - **CPU**:
    - Configures CPU registers.
    - Sets up exception and interrupt handling mechanisms.
  - **Memory**:
    - Physical.
    - Virtual.
  - Device detection:
    - Storage controllers.
    - Network Interfaces.
    - Peripherals.

- Load modules (e.g., drivers) compiled into kernel:
  - Initialized during boot.
- Mounts temporary RAM-based filesystem (`tmpfs`) as `/`.
- Extracts `initramfs img` into `/`.
- Executes `/init` script:
  - Loads modules (e.g., Intel/AMD microcode).
  - Mounts SD `/` as Read-only for consistency checks, then remounts it as RW and switches to it.
  - Executes PID 1 (`/sbin/init`, sym-linked to `/usr/lib/systemd/systemd`).

## Init System
- `/etc/fstab` invoked:
  - Filesystem Table - mounts defined filesystems on boot.
    - Example: `Device Mount_point Filesystem Options Dump Pass`.

- Manages services based on targets (systemd) or runlevels (older init system):
  - Reads unit files in `/usr/lib/systemd/system` and `/etc/systemd/system`.
  - Executes them in order.

#### Systemd Targets
- 0: `poweroff.target`.
- 1: `rescue.target` (Getty - single-user mode for minimal maintenance).
- 2-4: `multi-user.target` (Multi-user mode).
- 5: `graphical.target` (GUI).
- 6: `reboot.target` (Reboot).

- Show currently loaded targets/runlevel:
    - `systemctl list-units --type=target`
    - `runlevel`

- Temporarily switch target:
    - `systemctl isolate name.target`
    - `init #`

- Permanent target:
    - `systemctl get-default`
    - `systemctl set-default name.target`

### Namespaces
- Isolate processes within their own environments

### Control groups (cgroups)
- Manage system resources distribution amongst processes

## User Login & Session Management
- Init loads shell GUI/CLI shell
    - Shell initializes user-specific configurations

## Win
### CLI (Terminal Emulators)
- Windows Terminal
### Shell
- PowerShell
#### Corporate License
- Employees/competitors can report unlicensed software to organizations like BSA through their channels for investigation and potential enforcement actions

- Software vendors often engage intermediary audit firms, such as KPMG, whose compliance and regulatory officers conduct audits to ensure corps comply with software license agreements

## Linux
### Multiple distributions
- Individual maintainers/orgs
- Different package managers
    - Packages hosted on org servers
    - Easy update and install through shell instead of searching for binaries

### Kernel
- Analogous to UNIX kernel written from scratch
- Originally developed by Linus Torvalds, written in C
- Rust used for new modules
- Originally hosted on Git
    - Now on GitLab
    - Has a GitHub repo without active commits

### File Systems
| File System | Crash Protection   | Data Integrity Checks  | Snapshots | Built-in RAID Support | Use Case               |
|-------------|---------------------|------------------------|-----------|-----------------------|-------------------------------------|
| **ext4**    | Journaling          | None                   | No        | No                    | Small-med file RW, Desktops         |
| **Btrfs**   | Copy-on-Write (COW) | Checksumming           | Yes       | Yes                   | Desktops                            |
| **XFS**     | Journaling          | Metadata Checksums     | No        | No                    | Large file servers                  |
| **ZFS**     | Copy-on-Write (COW) | End-to-End Checksums   | Yes       | Yes                   | High-capacity servers, data centers |

#### ext4
- Linux File System
    - Directories stored as files -> point to inodes -> point to data blocks

### RAID
- Redundant Array of Independent Disks
- Data redundancy, performance
    - Hardware
        - RAID controller
    - Software
        - Linux software RAID
        - LVM RAID

## Directory Structure
- /
    - **Root**
        - /bin: User command binaries
        - /boot: Bootloader and kernel files
        - /etc: Config/setting files
        - /sbin: System binaries        
        - /usr: Read-only app data and binaries
        - /var: Variable data files
        - /dev: Device files
        - /home: User home directories
        - /lib: Libraries and kernel modules
        - /mnt: Temporary mount point for external file systems
        - /opt: Optional software applications
        - /proc: Virtual file system for system and process info
        - /root: Root user home directory
        - /sys: System and hardware information
        - /tmp: Temporary files

## CLI (Terminal Emulators)
- Terminal app 
    - e.g. Gnome Terminal

## Shell
- Userspace interface to interact with applications
    - Interactive: User can enter commands
    - Non-interactive: `/sbin/nologin`

### Login
- Loads user environment
### Non-login
- Loads only global config without user environment

## GNU Utils
- FOSS utilities analogous to UNIX OS in function written from scratch

## Commands  
```
command -f --flag arguments
(Case Sensitive)
```
### Help  
```
	which
		List path of binary
	find
		search for files in a directory hierarchy
		Can be used with * (wildcard)
	locate
		find files by name/directory from db
	updatedb
		Updates locate's db /etc/updatedb.conf
	    -a all
	whatis
		Short desc
	man
		Long desc
	--help
		List flags
	df -h (filename)
		Space used in filesystems (of specified filenames)
	du -h
		space used by dir
		-d=1
			max depth for subdirectory list
	lsblk
		list block devices
		-f display their filesystems
	findmnt
		display currently mounted filesystems
	mount /dev/devicename /mountpoint
		mount block device to mount point
	umount /mountpoint
	whoami
	    current shell logged in username
	who am i
		+tty & login@
	users
		logged in usernames 
    who
	    +tty + login@
	last
		++IP + login till
    w
	    ++cpu usage + shell info 
    finger
		++ user ID details
	stat filename
	     access/read time
	     modification/write time
	     change time - metadata including permissions, ownership & modification time
    date
	Print/set date and time
hostnamectl
	Systemd binary
	Query/change hostname
	Display OS and kernel details also present in
	/etc/os-release
uname
	Print sys info
```
### File Management  
```
	cd
		change **directory**
			absolute
			relative
	ls
		list
		-l => ll
			long list
	    -a
			--all do not ignore entries starting with .
	    -h
			Human readable
		-u
		    Show access time instead of modification time
	lsof 
	     List open files
	cp
		copy files
		cp /source /dest
		-r copy directories recursively
	mv
		Move/rename files/directories
	mkdir
		make directory
		mkdir rel_dir_name 
		-p make parent directories as needed
	rm
		remove file
		rm path_to_file
		-r/R remove directories and their contents recursively
		-f ignore non existent files and args, never prompt
	rmdir
		remove dir
		rmdir path_to_dir
		Used to prevent accidental deletion of directories with files, binary released after rm (-rf)
	touch
		create empty file
	echo "text" > new/existing_file
	    > / 1> redirect stdout, overwrites
		2> redirect stderr
		>> append
	cat (file1) (file2) > new/existing_file
		Write/append existing files to new/existing ​file
	vim
	    -o open multiple files vertically
	    -O horizontally
	    :r file_name
		appends file
	    :set textwidth=80
		warps lines after 80 characters
	    :split (file_name)
		Split into two windows
	    :vsplit (file_name)
		.. two vertical windows
	    :qa
		Quit all
	    :only
		Quit all windows other than current one
	    ZZ
		Shorthand for :wq
		Save and quit if changes made
	    Ctrl
		+w +arrow_keys
		    switch window
    grep
	-v word
	    exclude line containing word
	-w search whole word
    awk '{print $column#, $column#}' filename
    cut -c1 filename
	print first character of each line
    sed -n '5p' filename
	-n prevent printing every line
	prints 5th line
    | less
	print output in pages
    head/tail
	print first/last part of file
    tar archive_name.tar(.gzip) path_to_dir
	tape archive saves many files into a single archive (uncompressed)
	-A append tar to ar
	-c create
	-v verbosely list files processed
	-f use archive file
	-r append files to end of ar
	-t list ar contents
	-z filter the archive through gzip
    gzip path_to_file
	compresses files
```
### File Permission Management  
```
	chown username:groupname dir
	chgroup groupname dir 
	chmod
		+/-t 
			Add/remove sticky bit
			to directory for maintaining write but denying deletion/renaming of files within it
			Only appears as  T if others x perm missing because it appears in its place 
		u(,)g(,)o+/-/=
		x = 1, executing commands (binaries)
		r = 2
		w = 4
		Numbers corresponding to ugo
		777
	chattr
	     change file attributes
	     File cannot be modified by even root unless attr removed
	     +a append only
	lsattr
	     List attributes
	umask
		subtracted from
			777 dir -022
			666 files -002
```
### User/Group Management  
```
adduser username
useradd username
	Needs -m to create home dir if it doesn't not exist
	Manual password setting with passwd
	-g
	-G
	-d custom\_home_dir
passwd username
usermod 
	-a append used with -G
	-g gid/gname
		Initial login group, initially same as username
	-G gid/gname
		Groups user is also part of
	-d
userdel
gpasswd -M user1,user2,user3 groupname
	Add multiple users to groupname
groups username
	list groups username is part of
id username
	list gids username is part of
groupadd gname
	-g 1003 
		groupid, must be unique
groupmod
	-n newname oldname
		change name
	-g newid gname
groupdel
```
### Process Management  
```
top
	L locate process_name
	k kill
	r renice - change priority
	h help
ps -aux
	-a all users
	-u show users
	-x processes without a TTY
	-Z zombie processes
kill -signal_no pid
	sends SIGTERM signal (15) by default
	    Does not immediately terminate, allows process to cleanup resources
		Can be ignored by processes with signal handler
	    -s specify signal
		    SIGKILL (9)
			    Immediately terminate
			SIGCONT (18)
			    Resume paused p fg/bg chosen automatically by p type
	    -l list signal
pkill process_name
​Ctrl
	+c
		​sends SIGINT (2)
			Interrupt process execution and terminate. CBI     
	​+z
		​sends SIGSTP (20)
			Suspends and sends p to background (paused state). Can have custom handling but not be ignored
	​+\
		​sends SIGQUIT (3)
			Interrupt + core dump for debugging. CBI
crontab
	manage crontab files for user
	-l list
	-e edit
	    * * * * * command
	    min hour day_of_month month day_of_week
	    @monthly command
	​jobs
	    List paused process id and names
	​fg (%job_id)
	    Resume fg process
	    Most recent w/o argument
	​bg (%job_id)
	    Resume bg process
sar -u 1 3
    interval_time(s) number_of_times
    System Activity Report
    -u CPU utilization
vmstat virtual memory statistics
iostat CPU and I/O stats for block devices
```
### Network Management  
```
nmcli
	BSD style command
	d[evice] show devices
	    connect/disconnect device_name
	    wifi connect "SSID" password "your_password"
netstat/ss
	-t tcp sockets
	-u udp sockets
	-l listening/open ports
	-n numerical, ip instead of hostname
Change IP
	dhclient -r
	nmcli d reapply p8p1
	ip a[ddr] add/del 192.168.x.x/24 dev p8p1
	ip a flush dev p8p1 #remove current IPs
	dhclient #get new ip from DHCP
scp uses sftp uses ssh uses port 22
```
### Security
```
Password Policy
    Aging
	Shadow Utils
	    /etc/login.defs
        Per-User
	    (/etc/shadow)
	    chage -m[inimum] 7 -M[aximum] 90 -W[arning_period] 7 username
	Complexity
	    Enforce policies when users change or create passwords (passwd)
	    Pluggable Authentication Modules (PAM)
	        /etc/pam.d/system-auth
	    Additional parameters, ensure consistency
	        /etc/security/pwquality.conf
Manage System Resources
    View current shell session soft and hard limits 
        ulimit (-S/H) -a
    Set
        ulimit (-S/H) <resource_flag> <value>
    Set permanently for username
        /etc/security/limits.conf
```
### Partition Management
```
​fdisk
    List/change partition table 
partprobe
    Make kernel read updated partition table without reboot
gdisk
    used for gpt drives
mkfs.ext4 /dev/sda1
or
mke2fs -t ext4 /dev/sda1
    Create ext4 filesystem
```
