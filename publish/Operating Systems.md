Offer suggestions by opening an [issue](https://github.com/supplefrog/linked-blog-md/issues)

# Table of Contents
- [Components](#components)
  - [Process Scheduling](#process-scheduling)
  - [Memory Management](#memory-management)
  - [Device Management](#device-management)
  - [File System Management](#file-system-management)
  - [Security](#security)
- [Boot Process](#boot-process)
- [Windows](#windows)
- [Linux](#linux)
  - [Directory Structure](#directory-structure)
  - [CLI (Terminal Emulators)](#cli-terminal-emulators)
  - [Shell](#shell)
  - [GNU Utils](#gnu-utils)
  - [Commands](#commands)

---

# Components

## Process Scheduling
**Non-preemptive** - CPU allocated until process completes execution

**Preemptive** - CPU allocated for fixed time

### Process Control Block - Data Structure

| PID             |
|:----------------|
| State           |
| Pointer         |
| Priority        |
| Program Counter |
| CPU Registers   |
| I/O Info        |
| Accounting Info |

PCBs of particular process states placed in their respective queues:
- **Job Queue**: All processes
- **Ready Queue**: In memory, waiting to execute
- **Device Queue**: Blocked due to unavailability of an I/O device

### Scheduler
- Loads job from queue into memory
  
- CPU Changes process state (ready → running)

#### Swapping
- Swaps suspended process (e.g., waiting for I/O) out of memory
- Reintroduces into memory later

### Context Switching
- Kernel saves register, memory state of CPU into PCB
- Loads saved state of the next process

### Algorithms
- FCFS, SJN, Priority Scheduling, SRT, Round Robin, Multiple-level Queue, etc

---

## Memory Management
### Memory Division
**Pages** - Fixed-size blocks

**Segments** - Variable-size logical units

### Virtual Memory 

Uses reserved storage space (**swap**) to extend physical memory (RAM)

---

## Device Management
### Kernel Modules
#### Drivers
- Hardware devices → Interrupt Request (IRQ)
- Register Interrupt Service Routine (ISR):
  - Handle interrupts generated by respective devices
  - Perform minimal processing and defer extensive processing to quickly return control to the interrupted process
  - Use Interrupt Controller:
    - ICs prioritize IRQs for CPU
    - APIC, MSI Controller

- Device Drivers:
  - CPU, Network Drivers

- File System Drivers:
  - Manage I/O and buffering
  - Example: NTFS

#### Pluggable Authentication Modules (PAM)

Provides framework for integrating authentication methods into applications

#### Network Protocol Modules

TCP/IP, UDP

#### Security Modules - Linux Security Modules (LSM)

Provide hooks for security decisions (file/network operations, process executions)

e.g. SELinux

### Kernel Services
- Manage software interrupts:
  - Exception Handling
  - System calls:
    - Examples: `read()`, `write()`, `getpid()`, `time()`, `pipe()`, `socket()`, `exec()`
    - Processor Mode switch: user to kernel mode (OS core functions)
    - Execute privileged operation
    - Return to user mode

---

## File System Management
- Organize files, metadata hierarchically in directories for easy access
- File data storage allocation

### Encryption
- During storage and transit

### Authorization
#### Discretionary Access Control (DAC)
- Manages user permissions (rwx)
- Defined in Access Control Lists

---

## Security
### Authentication
- Verifies identity
- Username-password login, biometrics, SSH keys

### Authorization
#### SELinux
- Implements Mandatory Access Control (MAC) at kernel level
- Establish roles and permissions for users and processes, overriding DAC based on resource ownership
- Enforces security policies that restrict access to system resources (e.g., Port access for applications)

#### Firewall
- Block incoming traffic based on rich rules
  - Example: block traffic on specific port from certain services/IPs

---

# Boot Process
## Power ON
CPU fetches reset vector (addr) from Firmware ROM which points to first instruction of firmware

## Firmware
#### BIOS
- POST (Power On Self-Test):
  - Checks CPU, RAM, MoBo, I/O devices
  - If successful:
    - Locates bootable media
  - Else:
    - Stops and shows error (Beeps/LED codes)

- Load boot sector from SD.
- **MBR** (Master Boot Record) - 512 bytes data structure stored in LBA 0:
  - Contains:
    - Bootstrap loader: scans partition table for a primary partition marked bootable mounted on `/boot`
    - Partition table
    - Disk signature
  - Loads bootloader

#### UEFI
- SEC (Security Initialization)
- PEI (Pre-EFI Initialization)
- DXE (Driver Execution Environment)
- BDS (Boot Device Selection)
- Reads GPT header & partition table:
  - LBA 0: Protective MBR
  - LBA 1: Primary GPT Header (partitioning scheme)
  - LBA 2: Primary partition table
  - Backup header and PT at the end of the disk

- **ESP (EFI System Partition - FAT32)** mounted on `/boot/efi`:
  - Contains `.efi` executable files:
    - Bootloader (systemd-boot, GRUB2)
    - Secure boot ensures only signed `.efi` are executed
  - Loads bootloader

## Bootloader
#### GRUB
- Reads `/boot`.
- `/efi/EFI/redhat/grub.cfg`:
  - Boot menu
  - Command line parameters (can customize kernel behavior)
- Loads into RAM:
  - **vmlinuz** (supports virtual memory)
  - **initramfs img**

#### systemd-boot
`/boot/efi/EFI/systemd/systemd-bootx64.efi`
- Boot menu
- Loads `vmlinuz` and `initramfs` into RAM and hands over execution

## Kernel
- `vmlinuz` contains a small stub (decompression code) that extracts itself
- Initializes:
  - **CPU**:
    - Configures CPU registers
    - Sets up exception and interrupt handling mechanisms
  - **Memory**:
    - Physical
    - Virtual
  - Device detection:
    - Storage controllers
    - Network Interfaces
    - Peripherals

- Load modules (e.g., drivers) compiled into kernel:
  - Initialized during boot
- Mounts temporary RAM-based filesystem (`tmpfs`) as `/`
- Extracts `initramfs img` into `/`
- Executes `/init` script:
  - Loads modules (e.g., Intel/AMD microcode)
  - Mounts SD `/` as Read-only for consistency checks, then remounts it as RW and switches to it
  - Executes PID 1 (`/sbin/init`, sym-linked to `/usr/lib/systemd/systemd`)

## Init System
- `/etc/fstab` invoked:
  - Filesystem Table - mounts defined filesystems on boot
    - Example: `Device Mount_point Filesystem Options Dump Pass`

- Manages services based on targets (systemd) or runlevels (older init system):
  - Reads unit files in `/usr/lib/systemd/system` and `/etc/systemd/system`
  - Executes them in order

| Runlevel target symlinked to | Systemd Target |
|------------------------------|----------------|
| 0 			       | poweroff.target|
| 1 			 | rescue.target (Getty)|
| 2-4 			 | multi-user.target	|
| 5 			 | graphical.target	|
| 6 			 | reboot.target  	|	

**Show currently loaded targets/runlevel**

`systemctl list-units --type=target` or

`runlevel`

**Temporarily switch target**

`systemctl isolate name.target` or

`init #`

**Permanent target**

`systemctl get-default`

`systemctl set-default name.target`

### Namespaces
Isolate processes within their own environments

### Control groups (cgroups)
Manage system resources distribution amongst processes

## User Login & Session Management
Init starts processes like getty or display managers that handle user login

After login, the user’s shell (CLI/GUI) or session manager initializes user-specific configurations

## Win
### CLI (Terminal Emulators)
- Windows Terminal
### Shell
- PowerShell
#### Corporate License
- Employees/competitors can report unlicensed software to organizations like BSA through their channels for investigation and potential enforcement actions

- Software vendors often engage intermediary audit firms, such as KPMG, whose compliance and regulatory officers conduct audits to ensure corps comply with software license agreements

## Linux
### Multiple distributions
- Individual maintainers/orgs
- Different package managers
    - Packages hosted on org servers
    - Easy update and install through shell instead of searching for binaries

### Kernel
- Analogous to UNIX kernel written from scratch
- Originally developed by Linus Torvalds, written in C
- Rust used for new modules
- Originally hosted on Git
    - Now on GitLab
    - Has a GitHub repo without active commits

### File Systems
| File System | Crash Protection   | Data Integrity Checks  | Snapshots | Built-in RAID Support | Use Case               |
|-------------|---------------------|------------------------|-----------|-----------------------|-------------------------------------|
| **ext4**    | Journaling          | None                   | No        | No                    | Small-med file RW, Desktops         |
| **Btrfs**   | Copy-on-Write (COW) | Checksumming           | Yes       | Yes                   | Desktops                            |
| **XFS**     | Journaling          | Metadata Checksums     | No        | No                    | Large file servers                  |
| **ZFS**     | Copy-on-Write (COW) | End-to-End Checksums   | Yes       | Yes                   | High-capacity servers, data centers |

#### ext4
- Linux File System
    - Directories stored as files -> point to inodes -> point to data blocks

### RAID
- Redundant Array of Independent Disks
- Data redundancy, performance
    - Hardware
        - RAID controller
    - Software
        - Linux software RAID
        - LVM RAID

## Directory Structure
| /         | Root directory                                   |
|:----------|:-------------------------------------------------|
| /bin      | User command binaries                            |
| /boot     | Bootloader and kernel files                      |
| /etc      | Configuration/setting files                      |
| /sbin     | System binaries                                  |
| /usr      | Read-only app data and binaries                  |
| /var      | Variable data files                              |
| /dev      | Device files                                     |
| /home     | User home directories                            |
| /lib      | Libraries and kernel modules                     |
| /mnt      | Temporary mount point for external file systems  |
| /opt      | Optional software applications                   |
| /proc     | Virtual file system for system and process info  |
| /root     | Root user home directory                         |
| /sys      | System and hardware information                  |
| /tmp      | Temporary files                                  |

## CLI (Terminal Emulators)
- Terminal app 
    - e.g. Gnome Terminal

## Shell
- Userspace interface to interact with applications
    - Interactive: User can enter commands
    - Non-interactive: `/sbin/nologin`
- **Login**
    - Loads user environment
- **Non-login**
    - Loads only global config without user environment

## GNU Utils
- FOSS utilities analogous to UNIX OS in function written from scratch

## Commands  
`command [-f] [--flag] arguments  #case sensitive`

| Help Command                            | Description                                                                                         |
|:----------------------------------------|:----------------------------------------------------------------------------------------------------|
| `which`                                 | List path of binary                                                                                 |
| `find dir -name [file]`                 | Search for files in a directory hierarchy; can use * (wildcard)                                     |
| `find dir -wholename [*/dir]`           | Search for dir in a directory hierarchy			                                        |
| `locate [file/dir]`                     | List files & directories with substring and subdirectories from database                            |
| `updatedb`                              | Updates locate's database (`/etc/updatedb.conf`);                                                   |
| `whatis cmd`                            | Short description of a command                                                                      |
| `man cmd`                               | Long manual description of a command                                                                |
| `cmd --help`                            | List flags and options for a command                                                                |
| `df -h [filename]`                      | Show space used in filesystems (for specified filenames)                                            |
| `du -h -d 1` [dir]                      | Show space used by directory, with max depth for subdirectory list                                  |
| `lsblk`                                 | List block devices                                                                                  |
| `lsblk -f`                              | Display block devices and their filesystems                                                         |
| `findmnt`                               | Display currently mounted filesystems                                                               |
| `mount /dev/devicename /mountpoint`     | Mount block device to mount point                                                                   |
| `umount /mountpoint`                    | Unmount block device from mount point                                                               |
| **`w`**                                 | List users, host/IP, login time, tty, CPU usage, shell                                              |
| **`who`**                               | List users, tty, and login time                                                                     |
| **`last`**                              | Show login history with IP and login duration                                                       |
| `whoami`                                | Show current shell logged-in username                                                               |
| `who am i`                              | Show username, tty, and login time                                                                  |
| `users`                                 | Show logged-in usernames                                                                            |
| `finger`                                | List users, host, tty, user ID details                                                              |
| `stat filename`                         | Show access/read time, modification/write time, change time (metadata, permissions, ownership)      |
| `date`                                  | Print or set date and time                                                                          |
| `hostnamectl [--set-hostname]`          | Systemd binary to query/change hostname; displays OS and kernel details (also in `/etc/os-release`) |
| `uname -a`                              | Print system information                                                                            |

| File Management Command                | Description                                                                                     |
|:---------------------------------------|:------------------------------------------------------------------------------------------------|
| `cd [absolute / relative path]`        | Change directory                                                                                |
| `ls`                                   | List directory contents                                                                         |
| `   -l` -> `ll`                        | Long listing format                                                                             |
| `   -a`                                | Show all entries (including those starting with `.`)                                            |
| `   -h`                                | Human-readable sizes                                                                            |
| `   -u`                                | Show access time instead of modification time                                                   |
| `lsof`                                 | List open files                                                                                 |
| `cp source dest`                       | Copy files                                                                                      |
| `   -r dir` 			                 | Copy directories recursively                                                                    |
| `mv source dest`                       | Move or rename files/directories                                                                |
| `mkdir [dir]`                          | Make directory                                                                                  |
| `mkdir -p [parent/child]`              | Make parent directories as needed                                                               |
| `rm file [f2] [f3*] file00{4,5,6}`     | Remove file(s); supports wildcards and brace expansion		                                   |
| `   -r dir`                            | Recursively remove directory and its contents                                                   |
| `   -f`                         	     | Force remove; never prompt - ignore nonexistent files                                           |
| `rmdir dir`                            | Remove empty directory                                                                          |
| `touch file`                           | Create empty file                                                                               |
| `echo "text"`                          | Print text on stdout                                                                            |
| `cat [file1] [file2] 			         | Concatenate files and print on stdout                                     					   |
| `  [1 / 2 / &]> file`                  | Redirect stdout/stderr/both, overwrite file                                                     |
| `            >> file`                  | Append to file                                                                                  |
| `grep -v word`                         | Exclude lines containing word                                                                   |
| `     -w word`                         | Search for whole word                                                                           |
| `awk '{print $1, $2}' filename`        | Print specified columns                                                                         |
| `cut -c1 filename`                     | Print first character of each line                                                              |
| `sed -n '5p' filename`                 | Print only the 5th line                                                                         |
| `stout \| less`                        | Print output in pages                                                                           |
| `head [file]` / `tail [file]`          | Print first/last part of file                                                                   |
| `tar -cvf archive.tar [files / dirs]`  | Create tar archive                                                                			   |
| `    -Avf a1.tar a2`           		 | Append a2 contents to a1                                                              		   |
| `    -rvf a1.tar [files / dirs]`       | Append to tar                                                              				   |
| `    -czvf archive.tar.gz dir`         | Create gzip-compressed tar archive                                                              |
| `    -tf a1.tar.gz`                    | List contents of archive                                                                        |
| `    -xvf a1.tar.gz`                   | Extract archive                                                                                 |
| `gzip [file]`                          | Compress file                                                                                   |

| Vim Command                            | Description                                                                                     |
|:---------------------------------------|:------------------------------------------------------------------------------------------------|
| `vim -o file1 file2`                   | Open multiple files vertically                                                                  |
| `    -O file1 file2`                   | Open multiple files horizontally                                                                |
| `:r file_name`                         | Append file into current buffer                                                                 |
| `:set textwidth=80`                    | Wrap lines after 80 characters                                                                  |
| `:split [file]` / `:vsplit [file]`     | Split window horizontally/vertically in vim                                                     |
| `:qa`                                  | Quit all windows                                                                                |
| `:only`                                | Close all but current window                                                                    |
| `:wq` ZZ                               | Save and quit if changes made                                                                   |
| Ctrl + w + arrow keys 	             | Switch window                                                                                   |

```
	cd
		change directory
			absolute
			relative
	ls
		list
		-l => ll
			long list
	    -a
			--all do not ignore entries starting with .
	    -h
			Human readable
        -u
            Show access time instead of modification time
    lsof 
        List open files
	cp
		copy files
		cp /source /dest
		-r copy directories recursively
	mv
		Move/rename files/directories
	mkdir
		make directory
		mkdir rel_dir_name 
		-p make parent directories as needed
	rm [absolute / relative path] file000{1,2,3} # bash arg for passing multiple files with same base name
		removes file
		-r/R recursively remove dir and its contents
		-f force - ignore non-existent files and args, never prompt
	rmdir
		remove dir
		rmdir path_to_dir
		Used to prevent accidental deletion of directories with files, binary released after rm (-rf)
	touch
		create empty file
	echo "text" > new/existing_file
	    > / 1> redirect stdout, overwrites
		2> redirect stderr
		>> append
	cat (file1) (file2) > new/existing_file
		Write/append existing files to new/existing ​file
	vim
	    -o open multiple files vertically
	    -O horizontally
	    :r file_name
		    appends file
	    :set textwidth=80
		    warps lines after 80 characters
	    :split (file_name)
		    Split into two windows
	    :vsplit (file_name)
		    .. two vertical windows
	    :qa
		    Quit all
	    :only
		    Quit all windows other than current one
	    ZZ
		    Shorthand for :wq
		    Save and quit if changes made
	    Ctrl
		    +w +arrow_keys
		        switch window
    grep
	    -v word
	        exclude line containing word
	    -w search whole word
    awk '{print $column#, $column#}' filename
    cut -c1 filename
	    print first character of each line
    sed -n '5p' filename
	    -n prevent printing every line
	    prints 5th line
    | less
	    print output in pages
    head/tail
	    print first/last part of file
    tar archive_name.tar(.gzip) path_to_dir
	    tape archive saves many files into a single archive (uncompressed)
    	-A append tar to ar
    	-c create
    	-v verbosely list files processed
    	-f use archive file
    	-r append files to end of ar
    	-t list ar contents
    	-z filter the archive through gzip
    gzip path_to_file
	    compresses files
```
### File Permission Management  
```
	chown username:groupname dir
	chgroup groupname dir 
	chmod
		+/-t 
			Add/remove sticky bit
			to directory for maintaining write but denying deletion/renaming of files within it
			Only appears as  T if others x perm missing because it appears in its place 
		u(,)g(,)o(+/-/=)
		    x = 1, executing commands (binaries)
		    r = 2
		    w = 4
        777
            Numbers corresponding to ugo
	chattr
        change file attributes
        File cannot be modified by even root unless attr removed
        +a append only
    lsattr
        List attributes
	umask
		subtracted from
            777 dir -022
			666 files -002
```
### User/Group Management  
```
    adduser username
    useradd username
    	Needs -m to create home dir if it doesn't not exist
    	Manual password setting with passwd
    	-g
    	-G
    	-d custom\_home_dir
    passwd username
    usermod 
    	-a append used with -G
    	-g gid/gname
    		Initial login group, initially same as username
    	-G gid/gname
    		Groups user is also part of
    	-d
    userdel
    gpasswd -M user1,user2,user3 groupname
    	Add multiple users to groupname
    groups username
    	list groups username is part of
    id username
    	list gids username is part of
    groupadd gname
    	-g 1003 
    		groupid, must be unique
    groupmod
    	-n newname oldname
    		change name
    	-g newid gname
    groupdel
```
### Process Management  
```
    top -p (monitor specific pid)
	o filter with custom param
		e.g. COMMAND=chrome - superior to L
    	L locate process_name
    	k kill
    	r renice - change priority
    	h help
    ps -aux
    	-a all users
    	-u show users
    	-x processes without a TTY
    	-Z zombie processes
    kill -signal_no pid
    	sends SIGTERM signal (15) by default
    	    Does not immediately terminate, allows process to cleanup resources
    		Can be ignored by processes with signal handler
    	    -s specify signal
    		    SIGKILL (9)
    			    Immediately terminate
    			SIGCONT (18)
    			    Resume paused p fg/bg chosen automatically by p type
    	    -l list signal
    pkill process_name
    ​Ctrl
    	+c
    		​sends SIGINT (2)
    			Interrupt process execution and terminate. CBI     
    	​+z
    		​sends SIGSTP (20)
    			Suspends and sends p to background (paused state). Can have custom handling but not be ignored
    	​+\
    		​sends SIGQUIT (3)
    			Interrupt + core dump for debugging. CBI
    crontab
    	manage crontab files for user
    	-l list
    	-e edit
    	    * * * * * command
    	    min hour day_of_month month day_of_week
    	    @monthly command
    	​jobs
    	    List paused process id and names
    	​fg (%job_id)
    	    Resume fg process
    	    Most recent w/o argument
    	​bg (%job_id)
    	    Resume bg process
    sar -u 1 3
        interval_time(s) number_of_times
        System Activity Report
        -u CPU utilization
    vmstat virtual memory statistics
    iostat CPU and I/O stats for block devices
```
### Network Management  
```
    nmcli
    	BSD style command
    	d[evice] show devices
    	    connect/disconnect device_name
    	    wifi connect "SSID" password "your_password"
    netstat/ss
    	-t tcp sockets
    	-u udp sockets
    	-l listening/open ports
    	-n numerical, ip instead of hostname
    Change IP
    	dhclient -r && dhclient p8p1
			DHCP Client
            Release the current IP and request a new one for specific interface
        nmcli d reapply p8p1

        ip a[ddr] add/del 192.168.x.x/24 dev p8p1
			Add/del specific IP to/from interface
    	ip a flush dev p8p1
	 		Remove all IPs from interface
    scp uses sftp uses ssh uses port 22
```
#### SSH key-based authentication
**Generate key on client**


`ssh-keygen -t rsa -b 4096 -C "abc@example.com"`

**Remove corrupt key**

`ssh-keygen -R server_ip`

**Copy key to server**

`ssh-copy-id user@server_ip`

### Security
```
Password Policy
    Aging
	Shadow Utils
	    /etc/login.defs
        Per-User
	    (/etc/shadow)
	    chage -m[inimum] 7 -M[aximum] 90 -W[arning_period] 7 username
	Complexity
	    Enforce policies when users change or create passwords (passwd)
	    Pluggable Authentication Modules (PAM)
	        /etc/pam.d/system-auth
	    Additional parameters, ensure consistency
	        /etc/security/pwquality.conf
Manage System Resources
    View current shell session soft and hard limits 
        ulimit (-S/H) -a
    Set
        ulimit (-S/H) <resource_flag> <value>
    Set permanently for username
        /etc/security/limits.conf
```
### Reset root password
- reboot to GRUB, press e
- **Mount root file system as rw instead of ro during early boot, run sh as init (PID 1)** 
- add to the end of linux16 boot params:
```
rw init=/sysroot/bin/sh

chroot /sysroot
passwd root
```

Re-label SELinux contexts:

```
touch /.autorelabel

exit
reboot
```

### Partition Management
```
    ​fdisk
        List/change partition table 
    partprobe
        Make kernel read updated partition table without reboot
    gdisk
        used for gpt drives
    mkfs.ext4 /dev/sda1
    or
    mke2fs -t ext4 /dev/sda1
        Create ext4 filesystem
```
